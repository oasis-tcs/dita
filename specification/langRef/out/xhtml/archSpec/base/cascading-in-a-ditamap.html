<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2017" />
<meta name="DC.rights.owner" content="(C) Copyright 2017" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="Cascading of metadata attributes in a DITA map" />
<meta name="abstract" content="Certain map-level attributes cascade throughout a map, which facilitates attribute and metadata management. When attributes cascade, they apply to the elements that are children of the element where the attributes were specified. Cascading applies to a containment hierarchy, as opposed to a element-type hierarchy." />
<meta name="description" content="Certain map-level attributes cascade throughout a map, which facilitates attribute and metadata management. When attributes cascade, they apply to the elements that are children of the element where the attributes were specified. Cascading applies to a containment hierarchy, as opposed to a element-type hierarchy." />
<meta name="DC.subject" content="cascading, definition, definitions, cascading" />
<meta name="keywords" content="cascading, definition, definitions, cascading" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="cascading-in-a-ditamap" />
<meta name="DC.Language" content="en-us" />
<link rel="stylesheet" type="text/css" href="../../xhtml/commonltr.css" />
<title>Cascading of metadata attributes in a DITA map</title>
</head>
<body id="cascading-in-a-ditamap">

  <h1 class="title topictitle1" id="ariaid-title1"><span class="ph">Cascading of metadata attributes in a DITA map</span></h1>

  
  
  <div class="body conbody"><p class="shortdesc">Certain map-level attributes cascade throughout a map, which facilitates attribute and
    metadata management. When attributes <dfn class="term">cascade</dfn>, they apply to the elements that are
    children of the element where the attributes were specified. Cascading applies to a containment
    hierarchy, as opposed to a element-type hierarchy.</p>

    
    
    <div class="section" id="cascading-in-a-ditamap__what-cascades">
      <p class="p">The following attributes cascade when set on the <code class="keyword markupname xmlelement">&lt;map&gt;</code> element or
        when set within a map:</p>

      <ul class="ul" id="cascading-in-a-ditamap__ul_f2j_pwn_yl">
                                <li class="li"><code class="keyword markupname xmlatt">@audience</code>, <code class="keyword markupname xmlatt">@platform</code>,
                                                <code class="keyword markupname xmlatt">@product</code>,
                                                <code class="keyword markupname xmlatt">@otherprops</code>,
                                        <code class="keyword markupname xmlatt">@rev</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@props</code> and any attribute specialized from
                                                <code class="keyword markupname xmlatt">@props</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@linking</code>, <code class="keyword markupname xmlatt">@toc</code>,
                                                <code class="keyword markupname xmlatt">@print</code>, <code class="keyword markupname xmlatt">@search</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@format</code>, <code class="keyword markupname xmlatt">@scope</code>,
                                                <code class="keyword markupname xmlatt">@type</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@xml:lang</code>, <code class="keyword markupname xmlatt">@dir</code>,
                                                <code class="keyword markupname xmlatt">@translate</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@processing-role</code></li>

                                <li class="li"><code class="keyword markupname xmlatt">@cascade</code></li>

                        </ul>

      <div class="p"><span class="ph">Cascading is additive for attributes that accept multiple
          values, except when the <code class="keyword markupname xmlatt">@cascade</code> attribute is set to avoid adding values
          to attributes.</span> For attributes that take a single value, the closest value defined on
        a containing element takes effect. In a relationship table, row-level metadata is considered
        more specific than column-level metadata, as shown in the following containment
          hierarchy:<ul class="ul" id="cascading-in-a-ditamap__containment">
          <li class="li"><code class="keyword markupname xmlelement">&lt;map&gt;</code> (most general)<ul class="ul">
              <li class="li"><code class="keyword markupname xmlelement">&lt;topicref&gt;</code> container (more specific)<ul class="ul">
                  <li class="li"><code class="keyword markupname xmlelement">&lt;topicref&gt;</code> (most specific)</li>

                </ul>
</li>

              <li class="li"><code class="keyword markupname xmlelement">&lt;reltable&gt;</code> (more specific)<ul class="ul">
                  <li class="li"><code class="keyword markupname xmlelement">&lt;relcolspec&gt;</code> (more specific)<ul class="ul">
                      <li class="li"><code class="keyword markupname xmlelement">&lt;relrow&gt;</code> (more specific)<ul class="ul">
                          <li class="li"><code class="keyword markupname xmlelement">&lt;topicref&gt;</code> (most specific)</li>

                        </ul>
</li>

                    </ul>
</li>

                </ul>
</li>

            </ul>
</li>

        </ul>
</div>

    </div>

    <div class="section" id="cascading-in-a-ditamap__merging-of-cascaded-attrs"><h2 class="title sectiontitle">Merging of cascading attributes</h2>
      
      <p class="p">The <code class="keyword markupname xmlatt">@cascade</code> attribute can be used to modify the additive nature of
        attribute cascading (though it does not turn off cascading altogether). The attribute has
        two predefined values: "merge" and "nomerge".</p>

      <dl class="dl">
                                
                                        <dt class="dt dlterm">cascade="merge"</dt>

                                        <dd class="dd">The metadata attributes cascade; the values of the
                                                metadata attributes are additive. This is the
                                                processing default for the <code class="keyword markupname xmlatt">@cascade</code>
                                                attribute and was the only defined behavior for DITA
                                                1.2 and earlier.</dd>

                                
                                
                                        <dt class="dt dlterm">cascade="nomerge"</dt>

                                        <dd class="dd">The metadata attributes cascade; however, they are not
            additive for <code class="keyword markupname xmlelement">&lt;topicref&gt;</code> elements that specify a different value
            for a specific metadata attribute. If the cascading value for an attribute is already
            merged based on multiple ancestor elements, that merged value continues to cascade until
            a new value is encountered (that is, setting <code class="ph codeph">cascade="nomerge"</code> does not
            undo merging that took place on ancestors).</dd>

                                
                        </dl>

      <p class="p">Implementers <dfn class="term RFC-2119">MAY</dfn> define
                                their own custom, implementation-specific tokens. To avoid name
                                conflicts between implementations or with future additions to the
                                standard, implementation-specific tokens <dfn class="term RFC-2119">SHOULD</dfn>
                                consist of a prefix that gives the name or an abbreviation for the
                                implementation followed by a colon followed by the token or method
                                name.</p>

      <div class="p">For example, a processor might define the token "appToken:audience" in order to specify
        cascading and merging behaviors for <strong class="ph b">only</strong> the <code class="keyword markupname xmlatt">@audience</code> attribute. The
        following rules apply:<ul class="ul">
          <li class="li">The predefined values for the <code class="keyword markupname xmlatt">@cascade</code> attribute <dfn class="term RFC-2119">MUST</dfn> precede any
            implementation-specific tokens, for example, <code class="ph codeph">cascade="merge
              appToken:audience"</code>.</li>

          <li class="li">Tokens can apply to a set of attributes, specified as part of the
              <code class="keyword markupname xmlatt">@cascade</code> value. In that case, the syntax for specifying those values
            consists of the implementation-specific token, followed by a parenthetical group that
            uses the same syntax as groups within the <code class="keyword markupname xmlatt">@audience</code>,
              <code class="keyword markupname xmlatt">@platform</code>, <code class="keyword markupname xmlatt">@product</code>, and <code class="keyword markupname xmlatt">@otherprops</code>
            attributes. For example, a token that applies to only <code class="keyword markupname xmlatt">@platform</code> and
              <code class="keyword markupname xmlatt">@product</code> could be specified as <code class="ph codeph">cascade="appname:token(platform
              product)"</code>.</li>

        </ul>
</div>

    </div>

    <div class="example" id="cascading-in-a-ditamap__cascade-att-examples"><h2 class="title sectiontitle">Examples of the <code class="keyword markupname xmlatt">@cascade</code> attribute in use</h2>
      
      <p class="p">Consider the following code examples:</p>

      <div class="fig fignone" id="cascading-in-a-ditamap__mapA"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Map A</span>
        
        <pre class="pre codeblock"><code>&lt;map audience="a b" cascade="merge"&gt;
     &lt;topicref href="topic.dita" audience="c"/&gt;
&lt;/map&gt;
</code></pre>
      </div>

      <div class="fig fignone" id="cascading-in-a-ditamap__mapB"><span class="figcap"><span class="fig--title-label">Figure 2. </span>Map B</span>
        
        <pre class="pre codeblock"><code>&lt;map audience="a b" cascade="nomerge"&gt;
     &lt;topicref href="topic.dita" audience="c"/&gt;
&lt;/map&gt;
</code></pre>
      </div>

      <p class="p">For map A, the values for the attribute are merged, and the effective value of the
          <code class="keyword markupname xmlatt">@audience</code> attribute for <span class="ph filepath">topic.dita</span> is "a b c". For
        map B, the values for the attribute are not additive, and the effective value of the
          <code class="keyword markupname xmlatt">@audience</code> attribute for <span class="ph filepath">topic.dita</span> is "c".</p>

      <p class="p">In the following example, merging is active at the map level but turned off below:</p>

      <div class="fig fignone" id="cascading-in-a-ditamap__mapC"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Map C</span>
        
        <pre class="pre codeblock"><code>&lt;map platform="a" product="x" cascade="merge"&gt;
  &lt;topicref href="one.dita" platform="b" product="y"&gt;
    &lt;topicref href="two.dita" cascade="nomerge" product="z"/&gt;
  &lt;/topicref&gt;
&lt;/map&gt;</code></pre>
      </div>

      <p class="p">In map C, the reference to <span class="ph filepath">one.dita</span> has effective merged values of "a
        b" for <code class="keyword markupname xmlatt">@platform</code> and "x y" for <code class="keyword markupname xmlatt">@product</code>.</p>

      <p class="p">The reference to <span class="ph filepath">two.dita</span> turns off merging, so the explicit
          <code class="keyword markupname xmlatt">@product</code> value of "z" is used (it does not merge with ancestor values).
        The <code class="keyword markupname xmlatt">@platform</code> attribute is not present, so the already-merged value of "a b"
        continues to cascade and is the effective value of <code class="keyword markupname xmlatt">@platform</code> on this
        reference.</p>

    </div>

    <div class="section" id="cascading-in-a-ditamap__cascade-att-algorithm"><h2 class="title sectiontitle">Order for processing cascading attributes in a map</h2>
      
      <p class="p">When determining the value of an attribute, processors <dfn class="term RFC-2119">MUST</dfn> evaluate each attribute on each individual element in a
        specific order; this order is specified in the following list. Applications <dfn class="term RFC-2119">MUST</dfn> continue through the list until a
        value is established or until the end of the list is reached (at which point no value is
        established for the attribute). In essence, the list provides instructions on how processors
        can construct a map where all attribute values are set and all cascading is complete.</p>

      <p class="p">For example, in the case of <code class="ph codeph">&lt;topicref toc="yes"&gt;</code>,
        applications <dfn class="term RFC-2119">MUST</dfn> stop at item <a class="xref" href="#cascading-in-a-ditamap__explicit-values">2</a> in the list; a value is
        specified for <code class="keyword markupname xmlatt">@toc</code> in the document instance, so <code class="keyword markupname xmlatt">@toc</code> values
        from containing elements will not cascade to that specific <code class="keyword markupname xmlelement">&lt;topicref&gt;</code>
        element. The <code class="ph codeph">toc="yes"</code> setting on that <code class="keyword markupname xmlelement">&lt;topicref&gt;</code>
        element will cascade to contained elements, provided those elements reach item <a class="xref" href="#cascading-in-a-ditamap__attributes-cascade">5</a> below when evaluating
        the <code class="keyword markupname xmlatt">@toc</code> attribute.</p>

      <div class="p">For attributes within a map, the following processing order <dfn class="term RFC-2119">MUST</dfn> occur:<ol class="ol" id="cascading-in-a-ditamap__ol_6eb4fb9c-b56f-4471-bb2d-b183fef5980c">
          <li class="li" id="cascading-in-a-ditamap__common-start">The <code class="keyword markupname xmlatt">@conref</code> and <code class="keyword markupname xmlatt">@keyref</code> attributes
            are evaluated.</li>

          <li class="li" id="cascading-in-a-ditamap__explicit-values">The explicit values specified in the document instance are
            evaluated. For example, a <code class="keyword markupname xmlelement">&lt;topicref&gt;</code> element with the
              <code class="keyword markupname xmlatt">@toc</code> attribute set to "no" will use that value.</li>

          <li class="li">The default or fixed attribute values are evaluated. For example, the
              <code class="keyword markupname xmlatt">@toc</code> attribute on the <code class="keyword markupname xmlelement">&lt;reltable&gt;</code> element has a
            default value of "no".</li>

          <li class="li" id="cascading-in-a-ditamap__common-end">The default values that are supplied by a controlled values file are
            evaluated.</li>

          <li class="li" id="cascading-in-a-ditamap__attributes-cascade">The attributes cascade.</li>

          <li class="li">The processing-supplied default values are applied.</li>

          <li class="li">After the attributes are resolved within the map, they cascade to referenced maps.
              <div class="note note"><span class="notetitle">Note:</span> The processing-supplied default values do not cascade to other maps. For
              example, most processors will supply a default value of <code class="ph codeph">toc="yes"</code>
              when no <code class="keyword markupname xmlatt">@toc</code> attribute is specified. However, a processor-supplied
              default of <code class="ph codeph">toc="yes"</code>
              <dfn class="term RFC-2119">MUST</dfn> not override a value of
                <code class="ph codeph">toc="no"</code> that is set on a referenced map. If the
                <code class="ph codeph">toc="yes"</code> value is explicitly specified, is given as a default
              through a DTD, XSD, RNG, or controlled values file, or cascades from a containing
              element in the map, it <dfn class="term RFC-2119">MUST</dfn>
              override a <code class="ph codeph">toc="no"</code> setting on the referenced map. See <a class="xref" href="map-to-map-cascading-of-metadata.html" title="When a DITA map (or branch of a DITA map) is referenced by another DITA map, by default, certain rules apply. These rules pertain to the cascading behaviors of attributes, metadata elements, and roles assigned to content (for example, the role of &#34;Chapter&#34; assigned by a chapter element). Attributes and elements that cascade within a map generally follow the same rules when cascading from one map to another map, but there are some exceptions and additional rules that apply.">Map-to-map cascading behaviors</a> for more details.</div>
</li>

          <li class="li">Repeat steps <a class="xref" href="#cascading-in-a-ditamap__common-start">1</a> to <a class="xref" href="#cascading-in-a-ditamap__common-end">4</a> for each referenced map.</li>

          <li class="li">The attributes cascade within each referenced map.</li>

          <li class="li">The processing-supplied default values are applied within each referenced map.</li>

          <li class="li">Repeat the process for maps referenced within the referenced maps.</li>

        </ol>
</div>

    </div>

  </div>

</body>
</html>