<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en-us" id="concept_wf2_3sb_lq">
 <title><ph >Processing conrefs</ph></title>
 <shortdesc >When processing content references, DITA processors compare the
  restrictions of each context to ensure that the conrefed content is valid in its new
  context.</shortdesc>
 <prolog>
  <metadata>
   <keywords>
    <indexterm>conref<indexterm>processing expectations</indexterm><indexterm>validity
      of</indexterm></indexterm>
    <indexterm>generalization<indexterm>conref resolution</indexterm></indexterm>
    <indexterm>processing<indexterm>conrefs</indexterm></indexterm>
    <indexterm>processing expectations<indexterm>conrefs, validity
      of</indexterm><indexterm>generalization during conref resolution</indexterm></indexterm>
   </keywords>
  </metadata>
 </prolog>
 <conbody>
  <note>The DITA <xmlatt>conref</xmlatt> attribute is a transclusion mechanism similar to XInclude
   and to HyTime value references. DITA differs from these mechanisms, however, in that conref
   validity does not apply simply to the current content at the time of replacement, but to the
   possible content given the restrictions of both the referencing document type and the referenced
   document type.</note>
  <p>When pulling content with the conref mechanism, if the referenced element is the same type as
   the referencing element, and the set of domains declared on the <xmlatt>domains</xmlatt>
   attribute in the referenced topic or map instance is the same as or a subset of the domains
   declared in the referencing document, the element set allowed in the referenced element is
   guaranteed to be the same as, or a subset of, the element set allowed in the referencing
   element.</p>
  <p>When pushing content with the conref mechanism, the domain checking algorithm is reversed. In
   this case, if the set of domains declared on the <xmlatt>domains</xmlatt> attribute in the
   referencing topic or map instance is the same as or a subset of the domains declared in the
   referenced document, the element set allowed in the pushed content is guaranteed to be the same
   as, or a subset of, the element set allowed in the new location.</p>
  <p>When both pulling or pushing content with the conref mechanism, processors resolving conrefs
    <term outputclass="RFC-2119">SHOULD</term> tolerate specializations of valid elements and
   generalize elements in the pushed or pulled content fragment as needed for the resolving
   context.</p>
  <p>Except where allowed by weak constraints, a conref processor <term outputclass="RFC-2119">MUST
    NOT</term> permit resolution of a reuse relationship that could be rendered invalid under the
   rules of either the reused or reusing content.</p>
 </conbody>
</concept>
